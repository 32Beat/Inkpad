////////////////////////////////////////////////////////////////////////////////
/*
	WDShapeOptionsController.m
	Inkpad

	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.

	Project Copyright (c) 2009-2014 Steve Sprang
*/
////////////////////////////////////////////////////////////////////////////////

#import "WDShapeOptionsController.h"

////////////////////////////////////////////////////////////////////////////////
@implementation WDShapeOptionsController
////////////////////////////////////////////////////////////////////////////////

+ (id) shapeControllerWithShape:(WDShape *)shape
{ return [[self alloc] initWithShape:shape]; }

////////////////////////////////////////////////////////////////////////////////

- (id) initWithShape:(WDShape *)shape
{
	self = [super init];
	if (self != nil)
	{
		if (shape != nil)
		{
			mShape = shape;
		}
	}

	return self;
}

////////////////////////////////////////////////////////////////////////////////

- (void) dealloc
{
	mShape = nil;
	mView = nil;
	mSlider = nil;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

- (id) view
{
	if (mView == nil)
	{ [self loadView]; }
	return mView;
}

- (void) loadView
{
	[[NSBundle mainBundle] loadNibNamed:[self nibName] owner:self options:nil];
	if (mView != nil)
	{
		[mSlider addTarget:self
		action:@selector(adjustValue:)
		forControlEvents:UIControlEventValueChanged];
	}
}

- (NSString *) nibName
{
	NSString *bundleName = [mShape shapeTypeName];
	return [bundleName stringByAppendingString:@"Options"];
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

- (IBAction) adjustValue:(id)sender
{
	if (sender == mSlider)
	{
		UISlider *slider = mSlider;
		[mShape adjustParamValue:[slider value] isFinal:![slider isTracking]];
	}
}

////////////////////////////////////////////////////////////////////////////////
@end
////////////////////////////////////////////////////////////////////////////////










